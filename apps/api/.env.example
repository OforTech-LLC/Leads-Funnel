# =============================================================================
# Environment Variables for Lead Capture API Lambda
# =============================================================================
# Copy this to .env for local development
# =============================================================================

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------
AWS_REGION=us-east-1

# Environment (dev|prod)
ENV=dev

# Project name (used for table naming)
PROJECT_NAME=kanjona

# -----------------------------------------------------------------------------
# DynamoDB Configuration
# -----------------------------------------------------------------------------
# Main leads table
DDB_TABLE_NAME=kanjona-funnel-dev-main

# Audit log table (for admin actions)
AUDIT_TABLE_NAME=kanjona-dev-audit

# Export jobs table
EXPORT_JOBS_TABLE_NAME=kanjona-dev-exports

# -----------------------------------------------------------------------------
# EventBridge Configuration
# -----------------------------------------------------------------------------
EVENT_BUS_NAME=default
EVENT_SOURCE=com.kanjona.leads

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Maximum requests per window
RATE_LIMIT_MAX=10

# Window size in minutes
RATE_LIMIT_WINDOW_MIN=10

# -----------------------------------------------------------------------------
# Idempotency
# -----------------------------------------------------------------------------
# TTL for idempotency records (hours)
IDEMPOTENCY_TTL_HOURS=24

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# IP Hash Salt (REQUIRED for production - generate a unique random string)
IP_HASH_SALT=your-secret-salt-here

# -----------------------------------------------------------------------------
# GDPR / Data Retention
# -----------------------------------------------------------------------------
# Number of days to retain lead data (for data-retention script)
RETENTION_DAYS=90

# S3 bucket for archiving leads before deletion (optional)
# If not set, leads are permanently deleted
# ARCHIVE_BUCKET=kanjona-archives-dev

# Whether to require consent for lead submission
REQUIRE_CONSENT=true

# Audit log retention in days
AUDIT_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# Admin API Configuration (for admin Lambda)
# -----------------------------------------------------------------------------
# Cognito User Pool ID
# COGNITO_USER_POOL_ID=us-east-1_XXXXXXXXX

# Cognito App Client ID
# COGNITO_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxx

# Cognito Issuer URL
# COGNITO_ISSUER=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_XXXXXXXXX

# SSM paths for dynamic configuration
# ALLOWED_EMAILS_SSM_PATH=/kanjona/dev/admin/allowed-emails
# FEATURE_FLAG_SSM_PATH=/kanjona/dev/admin/feature-flags
# IP_ALLOWLIST_FLAG_PATH=/kanjona/dev/admin/ip-allowlist-enabled
# IP_ALLOWLIST_SSM_PATH=/kanjona/dev/admin/ip-allowlist

# S3 bucket for exports
# EXPORTS_BUCKET=kanjona-exports-dev

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level (debug|info|warn|error)
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Data Retention Script Configuration
# -----------------------------------------------------------------------------
# Maximum iterations for scan operations (safety limit)
MAX_ITERATIONS=1000

# Batch size for delete operations
BATCH_SIZE=25

# Set to "true" to preview deletions without executing
DRY_RUN=false
